<nav class="fixed w-full flex items-center justify-center top-0 z-50 bg-combat-black py-5">
  <div class="max-w-[1280px] mx-auto px-4  w-full">
    <div class="flex items-center justify-between w-full">
      <div class="flex items-center">
        {%- if section.settings.logo_position != 'middle-center' -%}
          {%- if request.page_type == 'index' -%}
            <h1 class="header__heading">
          {%- endif -%}
          <a
            href="{{ routes.root_url }}"
            class="header__heading-link link link--text focus-inset"
          >
            {%- if settings.logo != blank -%}
              <div class="header__heading-logo-wrapper">
                {%- assign logo_alt = settings.logo.alt | default: shop.name | escape -%}
                {%- assign logo_height = settings.logo_width | divided_by: settings.logo.aspect_ratio -%}
                {% capture sizes %}(max-width: {{ settings.logo_width | times: 2 }}px) 50vw, {{ settings.logo_width }}px{% endcapture %}
                {% capture widths %}{{ settings.logo_width }}, {{ settings.logo_width | times: 1.5 | round }}, {{ settings.logo_width | times: 2 }}{% endcapture %}
                {{
                  settings.logo
                  | image_url: width: 600
                  | image_tag:
                    class: 'header__heading-logo motion-reduce',
                    widths: widths,
                    height: logo_height,
                    width: settings.logo_width,
                    alt: logo_alt,
                    sizes: sizes,
                    preload: true
                }}
              </div>
            {%- else -%}
              <span
                class="h2"
              >
                {{- shop.name -}}
              </span>
            {%- endif -%}
          </a>
          {%- if request.page_type == 'index' -%}
            </h1>
          {%- endif -%}
        {%- endif -%}
      </div>
      <div class="hidden md:flex items-center justify-center flex-1">
        <div class="flex items-center space-x-8">
          {% assign menu = linklists[section.settings.menu] %}
          {% if menu.links != blank %}
            {% for link in menu.links %}
              {% assign is_first = forloop.first %}
              {% if link.links != blank %}
                <div class="mother">
                  <div class="relative">
                    <a
                      class="flex items-center text-desert-tan hover:text-scarlet-red font-semibold text-[14px] uppercase tracking-wide transition-colors duration-200"
                      href="{{ link.url }}"
                    >
                      {{- link.title }}
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-chevron-down ml-1 size-[12px]"
                      >
                        <path d="m6 9 6 6 6-6"></path>
                      </svg>
                    </a>

                    <div class="absolute child top-full left-0 pt-1 w-56 z-50">
                      <div class="bg-combat-black border border-desert-tan/20 rounded-[4px] shadow-lg min-w-[222px]">
                        <div class="py-2">
                          {% for subLink in link.links %}
                            <a
                              class="block px-4 py-2 text-desert-tan/80 hover:text-scarlet-red text-[14px] transition-colors"
                              href="{{subLink.url }}"
                            >
                              {{- subLink.title -}}
                            </a>
                          {% endfor %}
                          {% if is_first %}
                            {% assign page = linklists[section.settings.page_menu] %}
                            {% if page.links != blank %}
                              <div class="border-t border-desert-tan/10 mt-2 pt-2">
                                {% for page in page.links %}
                                  <a
                                    class="block px-4 py-2 text-desert-tan/80 hover:text-scarlet-red text-[14px] transition-colors"
                                    href="{{page.url }}"
                                  >
                                    {{- page.title -}}
                                  </a>
                                {% endfor %}
                              </div>
                            {% endif %}
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              {% else %}
                <a
                  class="text-desert-tan hover:text-scarlet-red font-semibold text-[14px] uppercase tracking-wide transition-colors duration-200"
                  href="{{link.url}}"
                >
                  {{- link.title -}}
                </a>
              {% endif %}
            {% endfor %}
          {% endif %}
        </div>
      </div>
      <div class="flex items-center space-x-6">
        <div class="hidden md:flex items-center space-x-4">
          <button class="text-desert-tan hover:text-scarlet-red transition-colors duration-200">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-search size-[20px]"
            >
              <circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path>
            </svg>
          </button>
          <button class="text-desert-tan hover:text-scarlet-red transition-colors duration-200">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-user size-[20px]"
            >
              <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>
            </svg>
          </button>

          <button
            id="cart-toggle-btn"
            class="inline-flex items-center justify-center gap-2 whitespace-nowrap  text-signal-white font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50  border border-input bg-background hover:bg-accent hover:text-accent-foreground rounded-[4px] p-3 relative"
            type="button"
            aria-haspopup="dialog"
            aria-expanded="false"
            aria-controls="radix-:r0:"
            data-state="closed"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="34"
              height="34"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-shopping-cart size-[16px]"
            >
              <circle cx="8" cy="21" r="1"></circle><circle cx="19" cy="21" r="1"></circle><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"></path>
            </svg>
          </button>
        </div>
        <a
          class="btn-scarlet px-6 py-2 text-[14px] font-semibold uppercase tracking-wide transition-all duration-200"
          href="{{section.settings.contact_us_url}}"
          >Contact Us</a
        >
        <div class="md:hidden">
          <button class="text-desert-tan hover:text-scarlet-red">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</nav>

<div
  data-state="closed"
  class="overlay"
  style="pointer-events: auto;"
  data-aria-hidden="true"
  aria-hidden="true"
>
  <p></p>
</div>

<div
  role="dialog"
  id="radix-:r9:"
  aria-describedby="radix-:rb:"
  aria-labelledby="radix-:ra:"
  data-state="closed"
  class="cart-panel border-l border-desert/20"
  tabindex="-1"
  style="pointer-events: auto;"
>
  <div class="flex flex-col space-y-2 text-center sm:text-left">
    <h2
      id="radix-:ra:"
      class="text-[18px] font-semibold text-signal-white flex items-center justify-between"
    >
      <span>Shopping Cart</span>
    </h2>
  </div>
  <div class="flex flex-col h-full mt-6">
    <div class="flex-1 flex items-center justify-center">
      <div class="text-center space-y-4">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-shopping-cart size-[68px] mx-auto text-muted-foreground"
        >
          <circle cx="8" cy="21" r="1"></circle><circle cx="19" cy="21" r="1"></circle><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"></path>
        </svg>
        <div>
          <h3 class="text-[18px] text-signal-white font-semibold">Your cart is empty</h3>
          <p class="text-muted-foreground">Add some tactical gear to get started</p>
        </div>
        <a
          href="{{section.settings.all_products_url}}"
          class="inline-flex items-center justify-center gap-2 whitespace-nowrap font-semibold rounded-[4px] text-[14px] text-signal-white  ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground px-4 py-2"
          >Browse Products</a
        >
      </div>
    </div>
  </div>
  <button
    type="button"
    class="absolute right-4 top-4 rounded-[4px] opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="lucide lucide-x size-[16px]"
    >
      <path d="M18 6 6 18"></path><path d="m6 6 12 12"></path>
    </svg>
    <span class="sr-only">Close</span>
  </button>
</div>

<style>
  .cart-panel {
    position: fixed;
    z-index: 50;
    transform: translateX(-100%);
    min-width: 512px; /* For sm and up, handled below */
    gap: 1rem; /* gap-4 = 1rem */
    background-color: var(--color-background); /* Uses a CSS variable */
    padding: 1.5rem; /* p-6 = 24px = 1.5rem */
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); /* shadow-lg */
    transition: all 0.3s ease-in-out;
    top: 0;
    bottom: 0;
    right: -100%;
    height: 100%;
    width: 100%;
    max-width: 32rem; /* sm:max-w-lg = 512px */
  }

  @media (min-width: 640px) {
    .cart-panel {
      min-width: 512px;
    }
  }

  /* Optional animations based on data-state */
  .cart-panel[data-state='open'] {
    right: 0;
    animation: slideInFromRight 0.5s forwards;
  }

  .cart-panel[data-state='closed'] {
    animation: slideOutToRight 0.3s forwards;
  }

  /* Example keyframes (match Tailwind’s slide-in and slide-out) */
  @keyframes slideInFromRight {
    0% {
      transform: translateX(100%);
      opacity: 0;
    }
    100% {
      transform: translateX(0%);
      opacity: 1;
    }
  }

  @keyframes slideOutToRight {
    0% {
      transform: translateX(0%);
      opacity: 1;
    }
    100% {
      transform: translateX(100%);
      opacity: 0;
    }
  }

  .cart-slide-out {
    animation: cartSlideOut 0.3s ease-in-out forwards;
  }

  @keyframes cartSlideOut {
    0% {
      transform: translateX(0%);
      opacity: 1;
    }
    100% {
      transform: translateX(100%);
      opacity: 0;
    }
  }

  .cart-slide-out {
    animation: cartSlideOut 0.3s ease-in-out forwards;
  }

  @keyframes cartSlideOut {
    0% {
      transform: translateX(0%);
      opacity: 1;
    }
    100% {
      transform: translateX(100%);
      opacity: 0;
    }
  }

  .overlay {
    position: fixed;
    inset: 0; /* top: 0; right: 0; bottom: 0; left: 0; */
    z-index: 50;
    pointer-events: auto;
  }

  .overlay[aria-hidden='true'] {
    animation: overlayFadeOut 0.9s ease-out forwards;
    display: none;
  }
  .overlay[aria-hidden='false'] {
    background-color: rgba(0, 0, 0, 0.8);
    animation: overlayFadeIn 0.03s ease-out forwards;
  }

  @keyframes overlayFadeIn {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  @keyframes overlayFadeOut {
    0% {
      opacity: 1;
    }
    100% {
      opacity: 0;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var toggleBtn = document.getElementById('hamburgerToggle');
    var menu = document.getElementById('customMobileMenu');

    toggleBtn.addEventListener('click', function () {
      if (menu.classList.contains('slide-out')) {
        menu.classList.remove('slide-out');
        menu.classList.add('slide-in');
      } else {
        menu.classList.add('slide-out');
        menu.classList.remove('slide-in');
      }
    });
  });

  document.addEventListener('DOMContentLoaded', () => {
    const cartOverlay = document.querySelector('[data-aria-hidden]');
    const cartPanel = document.querySelector('[role="dialog"]');
    const closeButton = cartPanel.querySelector('button');
    const toggleButton = document.getElementById('cart-toggle-btn');

    function openCart() {
      cartOverlay.setAttribute('data-state', 'open');
      cartOverlay.classList.remove('overlay-fade-in');
      cartPanel.classList.remove('cart-slide-out');
      cartOverlay.setAttribute('aria-hidden', 'false');
      cartPanel.setAttribute('data-state', 'open');
      cartPanel.setAttribute('aria-hidden', 'false');
      cartPanel.focus();
    }

    function closeCart() {
      cartOverlay.classList.add('overlay-fade-in');
      cartPanel.classList.add('cart-slide-out');
      cartOverlay.setAttribute('data-state', 'closed');
      cartOverlay.setAttribute('aria-hidden', 'true');
      cartPanel.setAttribute('data-state', 'closed');
      cartPanel.setAttribute('aria-hidden', 'true');
    }

    function toggleCart() {
      if (cartPanel.getAttribute('data-state') === 'open') {
        closeCart();
      } else {
        openCart();
      }
    }

    if (toggleButton) {
      toggleButton.addEventListener('click', toggleCart);
    }

    closeButton.addEventListener('click', closeCart);
    cartOverlay.addEventListener('click', closeCart);

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && cartPanel.getAttribute('data-state') === 'open') {
        closeCart();
      }
    });
  });
</script>

<style>
  .mother .child {
    display: none;
  }
  .mother:hover .child {
    display: block;
  }

  .computer-nav {
    display: none;
  }

  @media (min-width: 768px) {
    .computer-nav {
      display: flex;
    }
  }
  .mobile-nav {
    display: block;
  }

  @media (min-width: 768px) {
    .mobile-nav {
      display: none;
    }
  }
</style>

{% schema %}
{
  "name": "App Header",
  "tag": "header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "Product Menu"
    },
    {
      "type": "link_list",
      "id": "page_menu",
      "label": "Page Menu"
    },
    {
      "type": "color_scheme",
      "id": "header_color",
      "label": "Header Color"
    },
    {
      "type": "color_scheme",
      "id": "contact_us_url",
      "label": "Contact Us Url"
    },
    {
      "type": "color_scheme",
      "id": "all_products_url",
      "label": "All Product Url"
    },
    {
      "type": "color",
      "id": "primary_color",
      "label": "Primary Color",
      "default": "#0d0d0d"
    },
    {
      "type": "color",
      "id": "secondary_color",
      "label": "Secondary Color",
      "default": "#AFA38E"
    },
    {
      "type": "color",
      "id": "tertiary_color",
      "label": "Tertiary Color",
      "default": "#7B0F23"
    }
  ],
  "blocks": [],
  "presets": [
    {
      "name": "App Header",
      "category": "Header"
    }
  ]
}
{% endschema %}
